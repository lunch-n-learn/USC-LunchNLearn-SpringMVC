apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'jetty'

sourceCompatibility = 1.8
version = '1.0'

// properties
ext {
    springVersion = "4.1.5.RELEASE"
    aspectJVersion = "1.8.5"
    jstlVersion = "1.2"
    log4jVersion = "2.2"
    slf4jVersion = "1.7.10"
    hamcrestVersion = "1.3"
    mockitoVersion = "1.10.19"
    springJPAVersion = "1.2.0.RELEASE"
    hibernateVersion = "3.6.10.Final"
    hibernateJPAVersion = "1.0.0.Final"
    hsqldbVersion = "2.2.9"
    jacksonVersion = "2.5.1"
}

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    // Core Spring Framework
    compile "org.springframework:spring-core:$springVersion"
    compile "org.springframework:spring-beans:$springVersion"
    compile "org.springframework:spring-context:$springVersion"
    compile "org.springframework:spring-context-support:$springVersion"

    // Web: Spring MVC
    compile "org.springframework:spring-web:$springVersion"
    compile "org.springframework:spring-webmvc:$springVersion"

    // AOP: Spring + AspectJ
    compile "org.springframework:spring-aop:$springVersion"
    compile "org.springframework:spring-aspects:$springVersion"
    compile "org.aspectj:aspectjrt:$aspectJVersion"
    compile "org.aspectj:aspectjweaver:$aspectJVersion"

    compile "javax.servlet:jstl:$jstlVersion"

    // Logging
    compile "org.apache.logging.log4j:log4j-api:$log4jVersion"
    compile "org.apache.logging.log4j:log4j-core:$log4jVersion"
    compile "org.apache.logging.log4j:log4j-web:$log4jVersion"
    compile "org.apache.logging.log4j:log4j-slf4j-impl:$log4jVersion"
    compile "org.slf4j:slf4j-api:$slf4jVersion"

    // Hibernate + JPA + HSQLDB
    compile "org.springframework.data:spring-data-jpa:$springJPAVersion"
    compile "org.hibernate.javax.persistence:hibernate-jpa-2.0-api:$hibernateJPAVersion"
    compile "org.hibernate:hibernate-entitymanager:$hibernateVersion"
    compile "org.hsqldb:hsqldb:$hsqldbVersion"

    // Jackson JSON
    compile "com.fasterxml.jackson.core:jackson-core:$jacksonVersion"
    compile "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
    compile "com.fasterxml.jackson.core:jackson-annotations:$jacksonVersion"

    // Unit Testing
    testCompile "org.hamcrest:hamcrest-all:$hamcrestVersion"
    testCompile "org.mockito:mockito-core:$mockitoVersion"
    testCompile "org.springframework:spring-test:$springVersion"
    testCompile('junit:junit:4.+') {
        exclude group: "org.hamcrest", module: "hamcrest-core"
    }
//    testCompile group: 'junit', name: 'junit', version: '4.11'

    //include in compile only, exclude in the war
    providedCompile 'javax.servlet:servlet-api:2.5'

}


war.archiveName "lunchnlearn.war"
jettyRunWar.contextPath = 'lunchnlearn'
